<!DOCTYPE html>
<html>
  <head>
    <script type="module">
      import { h, Component, render } from 'https://unpkg.com/preact@latest?module';
      import { useState, useEffect, useCallback } from 'https://unpkg.com/preact@latest/hooks/dist/hooks.module.js?module';
      import htm from 'https://unpkg.com/htm?module';
      // Create your app
      // Initialize htm with Preact
      const html = htm.bind(h);

      function useCounter(valueFilled) {
        const [value, setValue] = useState(valueFilled);
        const increment = useCallback( () => { setValue(value + 1); console.log(value); }, [value] );
        const decrement = useCallback( () => { setValue( (value - 1 <0)?0:(value - 1) ); console.log(value); }, [value] );
        return { value, increment , decrement };
      }

      // First fffffhh
      function Counter(props) {
        const { value, increment, decrement } = useCounter(props.value);
        return html`
          <div>
            Counter A: ${value}
            <button onClick=${increment}>+</button>
            <button onClick=${decrement}>-</button>
          </div>`;
      }

      class CounterProps extends Component {
        constructor( props ) {
            super(props);
        }
        
        render(props) {
          return html`
          <div>
            Counter B: ${props.value}
            <button onClick=${()=>{ props.increment(props.value) } }>+</button>
            <button onclick=${()=>{ props.decrement(props.value) } }>-</button>
          </div>`;
        }
      }

      function Hello( props ) {
        var renderthis = html`<h1>Hello ${props.name2}!</h1>`;
        return renderthis;
      }

      class App extends Component {
        constructor( props ) {
            super(props);
            this.state = {
              value1 :20,
              value2 :30
            };
        }

        
        increment = (vallue) => { this.setState({value1 : vallue + 1 }) } ;
        decrement = (vallue) => { this.setState({value1 : vallue - 1 }) } ;


        render( props  ){
          // ${ this.state.map( vall => { return html`<${Counter} value=${vall.value} />` ;  } ) }
          /* <${Counter} value=${this.state.value2} />  */
          return html`
            <${Hello} name2="${props.name}"/> 
            <${CounterProps} value=${this.state.value1} decrement=${this.decrement} increment=${this.increment} />
            <br/>${this.state.value1}
            <br/>${this.state.value2}
          ` ;
        }
      }

      render( html`<${App} name="1ramulu" />`  , document.getElementById("freak"));
    </script>
  </head>
  <body id="freak">
    fuckfuckfuck
  </body>
</html>
